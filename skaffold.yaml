apiVersion: skaffold/v2beta28
kind: Config
metadata:
  name: demo-app

build:
  local:
    useBuildkit: true
    useDockerCLI: true
  tagPolicy:
    sha256: {}
  artifacts:
    - image: demo-api
      docker:
        dockerfile: demo.api/Dockerfile
        buildArgs:
          BUILD_CONFIG: Debug

deploy:
  helm:
    releases:
      - name: demo-app
        chartPath: ./k8s
        namespace: demo
        createNamespace: true
        # skipBuildDependencies: true
        artifactOverrides:
          image: demo-api
        imageStrategy:
          helm: {}
